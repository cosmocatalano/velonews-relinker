function clearEnd(a,b,c=1){let d=!1;return d=a[a.length-c]===b?clearEnd(a,b,c+1):a.substr(0,a.length-(c-1)),d}const vnBase="https://velonews.com?p=";let postId="";const changedUrls=new Map;document.addEventListener("DOMContentLoaded",function(){let a=document.querySelectorAll("a");for(let b of a){let a=new URL(b.href);if("velonews.competitor.com"===a.hostname||"www.velonews.com"===a.hostname||"velonews.com"===a.hostname){if(!a.search){let c=clearEnd(a.pathname,"/");if(-1!==c.indexOf("_"))postId=c.split("_")[1];else{let a=c.split("/")[c.split("/").length-1];if(!/[a-zA-Z]/g.test(a))postId=a;else if(a.includes(".html"))postId=a;else{changedUrls.set(b.href,b.href);continue}}}else postId=a.search;b.dataset.originalurl=a;let c=b.href,d=vnBase+postId;b.href=d,changedUrls.set(c,d)}}console.log("velonews-relinker found "+changedUrls.size+" urls:");for(let a of changedUrls)a[0]===a[1]?console.log("did not update likely-working "+a[0]):console.log("updated "+a[0]+" to "+a[1]);console.log("more info: https://github.com/cosmocatalano/velonews-relinker")});